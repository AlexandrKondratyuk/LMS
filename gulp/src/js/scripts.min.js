"use strict";

function delTeg() {
    for (var e = 0; e < 5; e++) {
        var t = document.getElementsByClassName("animTeg");
        t[0].parentNode.removeChild(t[0])
    }
}

function animTT(e) {
    function t() {
        var e = document.createElement("DIV");
        e.innerText = i[s], s += 1, e.style.cssText = "left: -50px; top:50px; px; position: absolute; width: 100px; z-index: 2;  height: 20px;  color: #04bcc2; font-size: 20px; ", a.appendChild(e), e.classList.add("animTeg"), e.direction = 6.28 * Math.random();
        var t = e.getBoundingClientRect();
        e.realTop = t.top, e.realLeft = t.left, setInterval(function () {
            n(e)
        }, 17), r.push(e)
    }

    function n(e) {
        for (var t = 0; t < r.length; t++) r[t] == e || e.timeout || e.realTop > r[t].realTop && e.realTop < r[t].realTop + 20 && e.realLeft > r[t].realLeft + 20 && e.realLeft < r[t].realLeft + 60 && (e.direction += Math.PI / 2, r[t].direction += Math.PI / 2, e.timeout = !0, setTimeout(function () {
            e.timeout = !1
        }, 2e3));
        if (e.realTop += Math.sin(e.direction) * l, e.realLeft += Math.cos(e.direction) * l, e.realTop > o.height - 50 || e.realLeft < 0 || e.realTop < 0 || e.realLeft > o.width - 100) return e.direction += Math.PI / 2, n(e);
        e.style.top = e.realTop + "px", e.style.left = e.realLeft + "px"
    }
    for (var a = e[0].children[0], i = ["[password]", "<h>", "<p/>", "<h/>", "<span>"], s = 0, r = [], l = 2, o = a.getBoundingClientRect(), c = 5; c--;) t()
}

function select(e) {
    return document.querySelector(e)
}
var checkRegistrFields = {
        nameString: "",
        surnameString: "",
        emailString: "",
        passwordString: "",
        confirmPasswordString: "",
        errorMessage: select("#error-message"),
        checkRegName: function () {
            var e = select("#name").value,
                t = /^(\s?[A-Z]{1}[a-z]+){1,3}$|^(\s?[А-ЯЁ]{1}[а-яё]+){1,3}$|^(\s?[А-ЩЮЯЄІЇҐ’'`]{1}[а-щьюяєіїґ’'`]+){1,3}$/.test(e);
            return t ? (this.nameString = "", select(".input-wrapper-name").classList.remove("input-wrapper--wrong-data")) : (select(".input-wrapper-name").classList.add("input-wrapper--wrong-data"), this.nameString = "Имя должно начинаться с заглавной буквы и не содержать цифр;"), this.checkValid(), t
        },
        checkRegSurname: function () {
            var e = select("#surname").value,
                t = /^(-?[A-Z]{1}[a-z]+){1,3}$|^(-?[А-ЯЁ]{1}[а-яё]+){1,3}$|^(-?[А-ЩЮЯЄІЇҐ’'`]{1}[а-щьюяєіїґ’'`]+){1,3}$/.test(e);
            return t ? (this.surnameString = "", select(".input-wrapper-surname").classList.remove("input-wrapper--wrong-data")) : (select(".input-wrapper-surname").classList.add("input-wrapper--wrong-data"), this.surnameString = "Фамилия должна начинаться с заглавной буквы и не содержать цифр;"), this.checkValid(), t
        },
        checkRegEmail: function () {
            var e = select("#new-email").value,
                t = /^\w+([\.-]?\w+)*@[a-z]+([\.-]?\w+)*(\.\w{2,6})+$/.test(e);
            return t ? (this.emailString = "", select(".input-wrapper-email").classList.remove("input-wrapper--wrong-data")) : (select(".input-wrapper-email").classList.add("input-wrapper--wrong-data"), this.emailString = "Введите существующий E-mail;"), this.checkValid(), t
        },
        checkRegPass: function () {
            var e = select("#new_pass").value,
                t = !(/\s+/.test(e) || e.length < 5 || e.length > 32);
            return t ? (this.passwordString = "", select(".input-wrapper-pass").classList.remove("input-wrapper--wrong-data")) : (select(".input-wrapper-pass").classList.add("input-wrapper--wrong-data"), this.passwordString = "Пароль должен содержать минимум 5 символов;"), this.checkValid(), t
        },
        checkConfirm: function () {
            select("#new_pass").value === select("#confpass").value ? (select(".correctpass").style.visibility = "visible", !0, this.confirmPasswordString = "", select(".input-wrapper-confpass").classList.remove("input-wrapper--wrong-data")) : (!1, select(".correctpass").style.visibility = "hidden", this.confirmPasswordString = "Введенные Вами пароли не совпадают", select(".input-wrapper-confpass").classList.add("input-wrapper--wrong-data")), this.checkValid()
        },
        checkValid: function () {
            return this.errorMessage.innerHTML = "<p>" + this.nameString + "</p><p>" + this.surnameString + "</p><p>" + this.emailString + "</p> <p>" + this.passwordString + " </p><p>" + this.confirmPasswordString + "</p>"
        }
    },
    open_login = document.getElementById("open_login"),
    open_signin = document.getElementById("open_signin"),
    modal_login = document.getElementsByClassName("wrapper__modal-window--entrance"),
    modal_login1 = document.getElementsByClassName("wrapper__modal-window--registration"),
    close_login = document.getElementsByClassName("modal-window__close"),
    end_signin = document.getElementsByClassName("wrapper__modal-window--end-registration"),
    but_signin = document.getElementsByClassName("a-entrance__btn"),
    end_mail = document.getElementsByClassName("end-registration__text--mail");
open_login.addEventListener("click", function () {
    modal_login[0].style.display = "block", animTT(modal_login)
}), close_login[0].addEventListener("click", function () {
    delTeg(), modal_login[0].style.display = "none"
}), open_signin.addEventListener("click", function () {
    modal_login1[0].style.display = "block", animTT(modal_login1)
}), close_login[1].addEventListener("click", function () {
    delTeg(), modal_login1[0].style.display = "none"
}), but_signin[1].addEventListener("click", function () {
    event.preventDefault(), delTeg(), checkRegistrationFields();
    var e = document.getElementById("new_email").value;
    e.length > 0 ? end_mail[0].innerHTML = e : end_mail[0].innerHTML = "[email _]", modal_login1[0].style.display = "none", end_signin[0].style.display = "block"
}), close_login[2].addEventListener("click", function () {
    end_signin[0].style.display = "none"
});
